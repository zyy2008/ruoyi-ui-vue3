<template>
  <div id="container" ref="videoContainer"></div>
</template>
<script setup>
import { onMounted, ref, defineProps } from "vue";

import { EZUIKitPlayer } from "ezuikit-js";
import { ElMessage } from "element-plus";

const videoContainer = ref(null);
const a = {
  AppKey: "9d96d9e9439248b3af163466f192ff07",
  AccessToken:
    "at.4vrce2vj7wfrxlk4011o2xlu0kjnru5e-4g4rbs3nln-1qgxm7j-er7is3exy",
  Url: "ezopen://open.ys7.com/FT2988704/1.hd.live",
};
const props = defineProps(["JKParams"]);



// ç›‘å¬æ’­æ”¾å™¨ç¼“å†²çŠ¶æ€å˜åŒ–
onMounted(async () => {
  console.log("ğŸš€ ~ props:", props);
  props.JKParams.value.array.forEach((item) => {
    const player = new EZUIKitPlayer({
      id: videoContainer.value.id, // è§†é¢‘å®¹å™¨ID
      url: `ezopen://open.ys7.com/${item.deviceSerial}/${item.channelNo}${
        item.hd ? ".hd" : ""
      }.live`, // ç›´æ’­åœ°å€
      accessToken: item.AccessToken, // è®¿é—®ä»¤ç‰Œ2
      width: item.width, // è§†é¢‘å®½åº¦
      height: item.height, // è§†é¢‘é«˜åº¦
      AppKey: item.AppKey, // åº”ç”¨æ ‡è¯†
    });
    console.log("ğŸš€ ~ onMounted ~ player:", player);
  });
});
</script>

<style>
#container {
  width: 100%;
  height: 100%;
}
</style>
