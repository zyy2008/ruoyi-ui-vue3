

let testFeatures = [
    {
        "type": "Feature",
        "id": "XSGX_X_JSONToFeatures.347",
        "geometry": {
            "type": "MultiLineString",
            "coordinates": [
                [
                    [
                        119.65068034,
                        26.48563927,
                        0
                    ],
                    [
                        119.65001115,
                        26.48574354,
                        0
                    ]
                ]
            ]
        },
        "geometry_name": "geom",
        "properties": {
            "fid_": 346,
            "objectid_1": 347,
            "geoobjnum": 540302,
            "classify": "雨水",
            "upordown": 2,
            "code": "X",
            "snodeid": "1YS615",
            "enodeid": "1YS619",
            "startdepth": 0.6,
            "enddepth": 0.6,
            "matter": "混凝土",
            "coverstsle": "管沟",
            "standard": "500X500",
            "smscode": "地下雨排水",
            "smssymbol": null,
            "mark": null,
            "direction": 0,
            "hlb": "底高",
            "start_surf": 4.845,
            "end_surf_h": 4.922,
            "linetype": null,
            "startdep_1": 4.245,
            "enddepthgc": 4.322,
            "clry": null,
            "geoguid": "7c5cae9d-4843-44df-afe5-f6ae9916d914",
            "pipeid": "577",
            "pipelinety": null,
            "proad": "德盛厂区",
            "cjrq": "1610496000000",
            "rkrq": null,
            "cjdw": null,
            "usestate": "在用",
            "medium": null,
            "d_dia": null,
            "datasoure": "实测",
            "standard1": 500,
            "standard2": 500,
            "shape_leng": 67.712044554,
            "shape_le_1": 0.00067725856446
        },
        "bbox": [
            119.65001115,
            26.48563927,
            119.65068034,
            26.48574354
        ]
    },
    {
        "type": "Feature",
        "id": "XSGX_X_JSONToFeatures.372",
        "geometry": {
            "type": "MultiLineString",
            "coordinates": [
                [
                    [
                        119.65092299,
                        26.48666627,
                        0
                    ],
                    [
                        119.65017185,
                        26.48678609,
                        0
                    ]
                ]
            ]
        },
        "geometry_name": "geom",
        "properties": {
            "fid_": 371,
            "objectid_1": 372,
            "geoobjnum": 540302,
            "classify": "雨水",
            "upordown": 2,
            "code": "X",
            "snodeid": "1YS781",
            "enodeid": "1YS782",
            "startdepth": 1.23,
            "enddepth": 1.05,
            "matter": "混凝土",
            "coverstsle": "直埋",
            "standard": "1000",
            "smscode": "地下雨排水",
            "smssymbol": null,
            "mark": null,
            "direction": 0,
            "hlb": "底高",
            "start_surf": 4.847,
            "end_surf_h": 4.907,
            "linetype": null,
            "startdep_1": 3.617,
            "enddepthgc": 3.857,
            "clry": null,
            "geoguid": "af2ca1fe-f9a4-44f8-9906-b6c2e0d0997a",
            "pipeid": "706",
            "pipelinety": null,
            "proad": "德盛厂区",
            "cjrq": "1610582400000",
            "rkrq": null,
            "cjdw": null,
            "usestate": "在用",
            "medium": null,
            "d_dia": null,
            "datasoure": "实测",
            "standard1": 1000,
            "standard2": 1000,
            "shape_leng": 76.0576804896,
            "shape_le_1": 0.000760639152251
        },
        "bbox": [
            119.65017185,
            26.48666627,
            119.65092299,
            26.48678609
        ]
    },
    {
        "type": "Feature",
        "id": "XSGX_X_JSONToFeatures.555",
        "geometry": {
            "type": "MultiLineString",
            "coordinates": [
                [
                    [
                        119.65046901,
                        26.48525119,
                        0
                    ],
                    [
                        119.64997264,
                        26.48532929,
                        0
                    ]
                ]
            ]
        },
        "geometry_name": "geom",
        "properties": {
            "fid_": 554,
            "objectid_1": 555,
            "geoobjnum": 540302,
            "classify": "雨水",
            "upordown": 2,
            "code": "X",
            "snodeid": "1YS1749",
            "enodeid": "1YS1857",
            "startdepth": 0.6,
            "enddepth": 0.6,
            "matter": "混凝土",
            "coverstsle": "管沟",
            "standard": "800X600",
            "smscode": "地下雨排水",
            "smssymbol": null,
            "mark": null,
            "direction": 0,
            "hlb": "底高",
            "start_surf": 4.646,
            "end_surf_h": 4.633,
            "linetype": null,
            "startdep_1": 4.046,
            "enddepthgc": 4.033,
            "clry": null,
            "geoguid": "efbdb0d9-e91e-4cca-9b11-731ebb42481c",
            "pipeid": "1731",
            "pipelinety": null,
            "proad": "德盛厂区",
            "cjrq": "1616284800000",
            "rkrq": null,
            "cjdw": null,
            "usestate": "在用",
            "medium": null,
            "d_dia": null,
            "datasoure": "实测",
            "standard1": 800,
            "standard2": 600,
            "shape_leng": 50.240174337,
            "shape_le_1": 0.000502475043617
        },
        "bbox": [
            119.64997264,
            26.48525119,
            119.65046901,
            26.48532929
        ]
    },
    {
        "type": "Feature",
        "id": "XSGX_X_JSONToFeatures.574",
        "geometry": {
            "type": "MultiLineString",
            "coordinates": [
                [
                    [
                        119.65047723,
                        26.48517493,
                        0
                    ],
                    [
                        119.64998404,
                        26.48525232,
                        0
                    ]
                ]
            ]
        },
        "geometry_name": "geom",
        "properties": {
            "fid_": 573,
            "objectid_1": 574,
            "geoobjnum": 540302,
            "classify": "雨水",
            "upordown": 2,
            "code": "X",
            "snodeid": "1YS1748",
            "enodeid": "1YS1873",
            "startdepth": 0.6,
            "enddepth": 0.8,
            "matter": "混凝土",
            "coverstsle": "管沟",
            "standard": "550X600",
            "smscode": "地下雨排水",
            "smssymbol": null,
            "mark": null,
            "direction": 0,
            "hlb": "底高",
            "start_surf": 4.598,
            "end_surf_h": 4.709,
            "linetype": null,
            "startdep_1": 3.998,
            "enddepthgc": 3.909,
            "clry": null,
            "geoguid": "e6dae02d-96fc-4461-b3f8-b70a7cbddaa3",
            "pipeid": "1761",
            "pipelinety": null,
            "proad": "德盛厂区",
            "cjrq": "1616284800000",
            "rkrq": null,
            "cjdw": null,
            "usestate": "在用",
            "medium": null,
            "d_dia": null,
            "datasoure": "实测",
            "standard1": 550,
            "standard2": 600,
            "shape_leng": 49.9140029575,
            "shape_le_1": 0.000499220513052
        },
        "bbox": [
            119.64998404,
            26.48517493,
            119.65047723,
            26.48525232
        ]
    }
]

function findMinAndFloor(arr) {
    // 找出数组中的最小值
    if (arr.length === 0) {
        return null; // 如果数组为空，返回null
    }
    let min = arr[0];
    for (let i = 1; i < arr.length; i++) {
        if (arr[i] < min) {
            min = arr[i];
        }
    }

    // 对最小值进行向下取整
    const flooredMin = Math.floor(min);

    return flooredMin;
}

function findMaxAndCeil(arr) {
    // 找出数组中的最大值
    if (arr.length === 0) {
        return null; // 如果数组为空，返回null
    }
    let max = arr[0];
    for (let i = 1; i < arr.length; i++) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }

    // 对最大值进行向上取整
    const ceiledMax = Math.ceil(max);

    return ceiledMax;
}

let Dline = {
    "type": "Feature",
    "properties": {
        "name": "",
        "id": "m-01367ab2-62b8-4ede-bcaa-b84dc01cd3a1",
        "type": "polyline",
        "style": {
            "width": 3,
            "color": "#ffff00",
            "materialType": "Color"
        },
        "options": {}
    },
    "geometry": {
        "type": "LineString",
        "coordinates": [
            [
                119.650222,
                26.487105,
                11
            ],
            [
                119.650223,
                26.484838,
                11
            ]
        ]
    }
}


class CrossSectionHelp {


    getPoint(line1, line2) {
        // 计算相交点
        const intersects = turf.lineIntersect(line1, line2)
        return intersects
    }
    getDis(point1, point2) {

        // 使用turf.distance计算两点之间的距离（单位：千米）
        const distanceInKm = turf.distance(point1, point2, { units: 'kilometers' });

        // 将距离从千米转换为米
        const distanceInMeters = distanceInKm * 1000; // 1千米 = 1000米

        return distanceInMeters;
    }

    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.init();
    }

    //初始化画布
    init() {
        // 设置画布背景颜色
        // 开启抗锯齿
        this.ctx.imageSmoothingEnabled = true;
        this.ctx.webkitImageSmoothingEnabled = true;
        this.ctx.fillStyle = "rgba(255, 255, 255, 0.05)";
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    }

    setOptions(opt) {
        this.featureGlobeArr = opt.FeatureGlobeArr || testFeatures; //所有的要素
        this.pipelineElevation = [];//管线高程
        this.groundElevation = [];//地面高程
        this.JJArr = [];  //交叉点
        this.drawLine = opt.graphic.toGeoJSON();
        for (let i = 0; i < this.featureGlobeArr.length; i++) {
            let px_c = this.getPoint(this.drawLine, this.featureGlobeArr[i])
            this.JJArr.push(px_c);
            console.log(px_c)

            this.pipelineElevation.push(this.featureGlobeArr[i].properties.startdep_1)
            this.groundElevation.push(this.featureGlobeArr[i].properties.start_surf)

        }
        this.JJArrMe = []; //间距
        this.sumLeng = 0;
        for (let j = 0; j < this.JJArr.length - 1; j++) {

            let space = this.getDis(this.JJArr[j].features[0], this.JJArr[j + 1].features[0]);
            this.JJArrMe.push(space)
            this.sumLeng += space;
        }

        console.log(this.JJArrMe)
        this.rows = 5;
        this.cols = 2;
        this.margin = 10; // 边距
        this.tableWidth = this.canvas.width - 2 * this.margin; // 表格宽度
        this.tableHeight = this.canvas.height - 1 * this.margin; // 表格高度
        this.cellWidthArrs = [0, 90, this.tableWidth];
        this.cellHeight = 60; // 单元格高度像素
        this.vagueH = 40;//折线图起始高度
        this.maxDepth = 3;//折线图显示的高度差
        this.scaleW = 15;//折线图刻度线宽度
        this.scaleMin = 4;//折线图刻度线最小值
        this.scaleMax = 6;//折线图刻度线最大值
        // this.pipelineElevation = opt.pipelineElevation || [4.930, 4.858];//管线高程
        // this.groundElevation = opt.groundElevation || [5.430, 5.538];//地面高程
        // this.specification = opt.specification || ["600X600", "600X600"];//规格

        this.scaleMin = findMinAndFloor([...this.pipelineElevation, ...this.groundElevation]);//折线图刻度线最小值
        this.scaleMax = findMaxAndCeil([...this.pipelineElevation, ...this.groundElevation]);//折线图刻度线最大值
        this.maxDepth = (this.scaleMax - this.scaleMin) * 1.2
    }
    //清空画布
    clearCanvas() {
        // 清空画布
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.ctx.fillStyle = "rgba(255, 255, 255, 0.05)";
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    }


    drawAll() {
        this.clearCanvas()
        this.drawBorder()
        this.drawTable()
        this.drawChart()
        // this.drawVerticalText()
    }

    drawBorder() {
        // 绘画布边框
        this.ctx.strokeStyle = 'black';
        this.ctx.strokeRect(0, 0, this.canvas.width, this.canvas.height);
    }


    drawTable() {
        const rows = this.rows; // 行数
        const cols = this.cols; // 列数
        const tableWidth = this.tableWidth // 表格宽度
        const tableHeight = this.tableHeight; // 表格高度
        const cellWidthArrs = this.cellWidthArrs;
        const cellHeight = this.cellHeight; // 单元格高度像素
        const margin = this.margin; // 边距



        // 绘制表格线-横线
        for (let i = 0; i < rows + 1; i++) {
            this.ctx.beginPath();
            this.ctx.strokeStyle = "rgba(255, 255, 255, 0.2)";
            this.ctx.moveTo(margin, tableHeight - cellHeight * i);
            this.ctx.lineTo(margin + tableWidth, tableHeight - cellHeight * i);
            this.ctx.stroke();
        }

        // 绘制表格线-竖线
        for (let i = 0; i <= cols + 1; i++) {
            this.ctx.beginPath();
            this.ctx.strokeStyle = "rgba(255, 255, 255, 0.2)";
            if (i === 1) {
                this.ctx.strokeStyle = "rgba(255, 255, 255, 0.5)";
            }
            this.ctx.moveTo(margin + cellWidthArrs[i], tableHeight - cellHeight * rows);
            this.ctx.lineTo(margin + cellWidthArrs[i], tableHeight);
            this.ctx.stroke();
        }

        // 绘制表格内容
        const data = [
            ['地面高程(m)', ''],
            ['管线高程(m)', ''],
            ['规格(mm)', ''],
            ['间距(m)', ''],
            ['总长(m)', '']
        ];

        let textWidths = [55, 90];
        for (let row = rows - 1; row >= 0; row--) {
            for (let col = 0; col < cols; col++) {
                const cell = data[rows - 1 - row][col];
                const x = margin / 2 + cellWidthArrs[col] + cellWidthArrs[col + 1] / 2 - textWidths[col] / 2;
                const y = tableHeight - cellHeight * (row + 1) + cellHeight / 2

                this.ctx.font = '13px Arial';
                this.ctx.fillStyle = '#ffffff';
                this.ctx.fillText(cell, x, y);
            }
        }
    }


    drawChart() {

        const tableWidth = this.tableWidth; // 表格宽度
        const tableHeight = this.tableHeight;; // 表格高度
        const cellHeight = this.cellHeight; // 单元格高度像素
        const margin = this.margin; // 边距
        const cellWidthArrs = this.cellWidthArrs;

        this.ctx.beginPath();
        this.ctx.strokeStyle = "rgba(255, 255, 255, 1)";
        this.ctx.moveTo(margin + cellWidthArrs[1], margin);
        this.ctx.lineTo(margin + cellWidthArrs[1], tableHeight - cellHeight * this.rows);
        this.ctx.stroke();

        const vagueH = this.vagueH;
        const maxDepth = this.maxDepth; //米(最高减去最低的高度差)
        const ratioDepth = (tableHeight - cellHeight * this.rows - margin) / maxDepth;
        const scaleW = this.scaleW;

        //绘制刻度线
        for (let i = this.scaleMin; i <= this.scaleMax; i += 0.1) {
            this.ctx.beginPath();
            this.ctx.strokeStyle = "rgba(255, 255, 255, 0.5)";
            this.ctx.moveTo(margin + cellWidthArrs[1], tableHeight - cellHeight * this.rows - vagueH - (i - this.scaleMin) * ratioDepth);
            this.ctx.lineTo(margin + cellWidthArrs[1] - scaleW, tableHeight - cellHeight * this.rows - vagueH - (i - this.scaleMin) * ratioDepth);
            this.ctx.stroke();

            //绘制文本
            const text = i.toFixed(1);
            const x = margin + cellWidthArrs[1] - scaleW - 20;
            const y = tableHeight - cellHeight * this.rows - vagueH - (i - this.scaleMin) * ratioDepth + this.scaleMin;

            this.ctx.font = '11px Arial';
            this.ctx.fillStyle = '#ffffff';
            this.ctx.fillText(text, x, y);
        }

        let xBase = margin + 80 + 40;
        let xScals = (cellWidthArrs[2] - cellWidthArrs[1] - 8 * margin) / this.sumLeng
        let spaceArr = [0, ... this.JJArrMe];
        let space = 0
        //循环绘制
        for (let p = 0; p < this.featureGlobeArr.length; p++) {
            let feature = this.featureGlobeArr[p];
            let pipelineElevation = feature.properties.startdep_1; //管线埋深
            let sO = spaceArr[p] * xScals
            if (p > 0 && sO < 30) {
                sO = 30;
            }
            space += sO; //间距
            if (Number.isNaN(space)) {
                space = 0;
            }
            let x = xBase + space;
            let y1 = tableHeight - cellHeight * 1
            let y2 = tableHeight - cellHeight * this.rows - vagueH - (pipelineElevation - this.scaleMin) * ratioDepth;

            //虚线
            this.ctx.beginPath();
            this.ctx.setLineDash([5, 5]); // 设置虚线样式
            // 设置虚线颜色为蓝色
            this.ctx.strokeStyle = "#3DA1FF";
            this.ctx.moveTo(x, y1); // 虚线起点
            this.ctx.lineTo(x, y2); // 虚线终点
            this.ctx.stroke();
            this.ctx.setLineDash([]); // 重置线样式


            // 设置文字颜色为黄色
            this.ctx.font = '13px Arial';
            this.ctx.fillStyle = '#3DA1FF';
            let classify = feature.properties.classify;
            this.ctx.fillText(classify, x, y2);

            //画圆
            this.drawCircle(this.ctx, x, y2, 4, "#3DA1FF")

            let specification = feature.properties.standard;
            //规格
            let ctx = this.ctx;
            let yGG = tableHeight - cellHeight * 2 - 2
            ctx.save();
            ctx.translate(x - 10, yGG);
            ctx.rotate(-Math.PI / 2);
            // 设置字体样式
            ctx.font = '12px Arial';
            this.ctx.fillStyle = '#ffffff';
            ctx.fillText(specification, 0, 0);
            ctx.restore();

            //管线高程
            let yGX = tableHeight - cellHeight * 3 - 2
            ctx.save();
            ctx.translate(x - 10, yGX);
            ctx.rotate(-Math.PI / 2);
            // 设置字体样式
            ctx.font = '14px Arial';
            this.ctx.fillStyle = '#3DA1FF';
            ctx.fillText(pipelineElevation, 0, 0);
            ctx.restore();

            let groundElevation = feature.properties.start_surf;
            //地面高程
            let yDM = tableHeight - cellHeight * 4 - 2
            ctx.save();
            ctx.translate(x - 10, yDM);
            ctx.rotate(-Math.PI / 2);
            // 设置字体样式
            ctx.font = '14px Arial';
            this.ctx.fillStyle = '#FF9346';
            ctx.fillText(groundElevation, 0, 0);
            ctx.restore();
        }

        let space2 = 0
        for (let k = 0; k < this.JJArrMe.length; k++) {

            let sO = spaceArr[k] * xScals
            if (k > 0 && sO < 30) {
                sO = 30;
            }
            space2 += sO; //间距
            if (Number.isNaN(space2)) {
                space2 = 0;
            }
            let x = xBase + space2;
            const y = tableHeight - cellHeight * (1 + 1) + cellHeight / 2
            let m = this.JJArrMe[k].toFixed(2);
            this.ctx.fillStyle = '#FFFFFF';
            this.ctx.fillText(m, x + 2, y);

            let sM = spaceArr[k + 1] * xScals;
            if (k > 0 && sM < 30) {
                sM = 30;
            }

            let x2 = x + sM;
            let groundElevation = this.featureGlobeArr[k].properties.start_surf;
            let groundElevation2 = this.featureGlobeArr[k + 1].properties.start_surf;

            //绘制地面线
            this.ctx.beginPath();
            this.ctx.moveTo(x, tableHeight - cellHeight * this.rows - vagueH - (groundElevation - this.scaleMin) * ratioDepth);
            this.ctx.lineTo(x2, tableHeight - cellHeight * this.rows - vagueH - (groundElevation2 - this.scaleMin) * ratioDepth);
            // 设置线条颜色为黄色
            this.ctx.strokeStyle = '#FF9346';
            this.ctx.stroke();

        }


        //总长
        let x = tableWidth / 2 + 20;
        const y = tableHeight - cellHeight * (1) + cellHeight / 2
        this.ctx.fillStyle = '#FFFFFF';
        this.ctx.fillText(this.sumLeng.toFixed(2), x + 2, y);

        // // 绘制虚线-起点
        // let x1 = margin + 80 + 40;
        // let y1 = tableHeight - cellHeight * 1
        // this.ctx.beginPath();
        // this.ctx.setLineDash([5, 5]); // 设置虚线样式
        // // 设置虚线颜色为蓝色
        // this.ctx.strokeStyle = "#3DA1FF";
        // this.ctx.moveTo(x1, y1); // 虚线起点
        // this.ctx.lineTo(x1, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[0] - this.scaleMin) * ratioDepth); // 虚线终点
        // this.ctx.stroke();
        // this.ctx.setLineDash([]); // 重置线样式


        // //绘制虚线-终点
        // let x2 = tableWidth - 40;
        // let y2 = tableHeight - cellHeight * 1
        // this.ctx.beginPath();
        // this.ctx.setLineDash([5, 5]); // 设置虚线样式
        // // 设置虚线颜色为黄色
        // this.ctx.strokeStyle = "#FF9346";
        // this.ctx.moveTo(x2, y2); // 虚线起点
        // this.ctx.lineTo(x2, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[1] - this.scaleMin) * ratioDepth); // 虚线终点
        // this.ctx.stroke();
        // this.ctx.setLineDash([]); // 重置线样式


        // //绘制管线
        // this.ctx.beginPath();
        // this.ctx.moveTo(x1, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[0] - this.scaleMin) * ratioDepth);
        // this.ctx.lineTo(x2, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[1] - this.scaleMin) * ratioDepth);
        // this.ctx.strokeStyle = '#3DA1FF';
        // this.ctx.stroke();

        // this.drawCircle(this.ctx, x1, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[0] - this.scaleMin) * ratioDepth, 4, "#3DA1FF")
        // this.drawCircle(this.ctx, x2, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[1] - this.scaleMin) * ratioDepth, 4, "#3DA1FF")

        // //绘制文本
        // const x = x1 - 106;
        // const y = tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[0] - this.scaleMin) * ratioDepth
        // // 设置文字颜色为黄色
        // this.ctx.font = '13px Arial';
        // this.ctx.fillStyle = '#3DA1FF';
        // this.ctx.fillText("管线", x, y + this.scaleMin);

        // this.ctx.fillText("雨水", x1, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[0] - this.scaleMin) * ratioDepth);
        // this.ctx.fillText("雨水", x2, tableHeight - cellHeight * this.rows - vagueH - (this.pipelineElevation[1] - this.scaleMin) * ratioDepth);


        // //绘制地面
        // this.ctx.beginPath();
        // this.ctx.moveTo(x1, tableHeight - cellHeight * this.rows - vagueH - (this.groundElevation[0] - this.scaleMin) * ratioDepth);
        // this.ctx.lineTo(x2, tableHeight - cellHeight * this.rows - vagueH - (this.groundElevation[1] - this.scaleMin) * ratioDepth);
        // // 设置线条颜色为黄色
        // this.ctx.strokeStyle = '#FF9346';
        // this.ctx.stroke();

        // this.ctx.fillStyle = '#FF9346';
        // this.ctx.fillText("地面", x, tableHeight - cellHeight * this.rows - vagueH - (this.groundElevation[0] - this.scaleMin) * ratioDepth + this.scaleMin);
    }


    drawVerticalText() {
        const tableWidth = this.tableWidth; // 表格宽度
        const tableHeight = this.tableHeight;; // 表格高度
        const cellHeight = this.cellHeight; // 单元格高度像素
        let ctx = this.ctx;

        let yGG = tableHeight - cellHeight * 2 - 2
        ctx.save();
        ctx.translate(120, yGG);
        ctx.rotate(-Math.PI / 2);
        // 设置字体样式
        ctx.font = '12px Arial';
        this.ctx.fillStyle = '#ffffff';
        ctx.fillText(this.specification[0], 0, 0);
        ctx.restore();


        let yGX = tableHeight - cellHeight * 3 - 2
        ctx.save();
        ctx.translate(120, yGX);
        ctx.rotate(-Math.PI / 2);
        // 设置字体样式
        ctx.font = '14px Arial';
        this.ctx.fillStyle = '#3DA1FF';
        ctx.fillText(this.pipelineElevation[0], 0, 0);
        ctx.restore();

        let yDM = tableHeight - cellHeight * 4 - 2
        ctx.save();
        ctx.translate(120, yDM);
        ctx.rotate(-Math.PI / 2);
        // 设置字体样式
        ctx.font = '14px Arial';
        this.ctx.fillStyle = '#FF9346';
        ctx.fillText(this.groundElevation[0], 0, 0);
        ctx.restore();



        let yGG2 = tableHeight - cellHeight * 2 - 2
        ctx.save();
        ctx.translate(tableWidth - 50, yGG2);
        ctx.rotate(-Math.PI / 2);
        // 设置字体样式
        ctx.font = '12px Arial';
        this.ctx.fillStyle = '#ffffff';
        ctx.fillText(this.specification[1], 0, 0);
        ctx.restore();


        let yGX2 = tableHeight - cellHeight * 3 - 2
        ctx.save();
        ctx.translate(tableWidth - 50, yGX2);
        ctx.rotate(-Math.PI / 2);
        // 设置字体样式
        ctx.font = '14px Arial';
        this.ctx.fillStyle = '#3DA1FF';
        ctx.fillText(this.pipelineElevation[1], 0, 0);
        ctx.restore();

        let yDM2 = tableHeight - cellHeight * 4 - 2
        ctx.save();
        ctx.translate(tableWidth - 50, yDM2);
        // 设置字体样式
        ctx.font = '14px Arial';
        this.ctx.fillStyle = '#FF9346';
        ctx.rotate(-Math.PI / 2);
        ctx.fillText(this.groundElevation[1], 0, 0);
        ctx.restore();
    }

    drawSquare(context, centerX, centerY, sideLength, color) {
        // Calculate the top-left corner of the square
        const topLeftX = centerX - (sideLength / 2);
        const topLeftY = centerY - (sideLength / 2);

        // Draw the square
        context.beginPath();
        context.moveTo(topLeftX, topLeftY);
        context.lineTo(topLeftX + sideLength, topLeftY);
        context.lineTo(topLeftX + sideLength, topLeftY + sideLength);
        context.lineTo(topLeftX, topLeftY + sideLength);
        context.closePath();
        context.strokeStyle = color;  // Set the stroke color
        context.stroke();
    }

    drawCircle(context, centerX, centerY, radius, color) {
        // Draw the circle
        context.beginPath();
        context.arc(centerX, centerY, radius, 0, 2 * Math.PI);
        context.strokeStyle = color;  // Set the stroke color
        context.stroke();
    }
}


export default CrossSectionHelp


